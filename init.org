#+Property: header-args :tangle yes :comments yes :results silent

* add mirror
#+begin_src emacs-lisp
  (require 'package)
  (setq package-archives
        '(("gnu"   . "https://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/")
          ("melpa" . "https://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/")
          ("org"   . "https://mirrors.tuna.tsinghua.edu.cn/elpa/org/")))
  (package-initialize)

  ;; Ensure package contents are loaded
  (unless package-archive-contents
    (package-refresh-contents))

  ;; Ensure `use-package`, `evil`, and `markdown-mode` are installed
  (dolist (pkg '(use-package evil markdown-mode))
    (unless (package-installed-p pkg)
      (package-install pkg)))

  ;; Make M-p work like M-x
  (global-set-key (kbd "M-p") 'execute-extended-command)
#+end_src


* evilmode
#+begin_src emacs-lisp
  (require 'evil)
  (evil-mode 1)

  ;; 检查 fcitx5-remote 是否可用
  (defun check-fcitx5-remote ()
    (executable-find "fcitx5-remote"))

  ;; 切换到英文输入法
  (defun switch-to-english-input ()
    (when (check-fcitx5-remote)
      (call-process "fcitx5-remote" nil nil nil "-c")))

  ;; 在进入普通模式时切换到英文输入法
  (add-hook 'evil-normal-state-entry-hook 'switch-to-english-input)
#+end_src

* Level 1

** Level 2


#+begin_src emacs-lisp

  (setq inhibit-splash-screen t)
  (if (fboundp 'tool-bar-mode) (tool-bar-mode -1))
  (if (fboundp 'menu-bar-mode) (menu-bar-mode -1))
  (if (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
  (menu-bar-mode -1)



  (prefer-coding-system 'utf-8)
  (set-terminal-coding-system 'utf-8)
  (set-keyboard-coding-system 'utf-8)
  (set-selection-coding-system 'utf-8)
  (setq locale-coding-system 'utf-8)
  (setq default-buffer-file-coding-system 'utf-8)





#+end_src

*** UI

enable pixel scroll

#+begin_src emacs-lisp
  ;; Enable pixel scroll
  (pixel-scroll-precision-mode 1)
  
  ;; Enable smooth scrolling
  (setq pixel-scroll-precision-interpolate-page t)
  
  ;; Use pixel scroll for all scrolling commands
  (defalias 'scroll-up-command 'pixel-scroll-interpolate-down)
  (defalias 'scroll-down-command 'pixel-scroll-interpolate-up)
  
  ;; Additional scroll settings for better experience
  (setq scroll-conservatively 101)  ;; Don't recenter point
  (setq scroll-margin 0)            ;; No margin when scrolling
  (setq scroll-preserve-screen-position t)  ;; Keep cursor position relative to screen
  (setq mouse-wheel-scroll-amount '(1 ((shift) . 1)))  ;; Fine-tune mouse wheel scrolling
  (setq mouse-wheel-progressive-speed nil)  ;; Disable progressive speed

  ;; Enable relative line numbers for non-org and non-markdown files
  (defun enable-relative-line-numbers ()
    (unless (or (derived-mode-p 'org-mode)
                (derived-mode-p 'markdown-mode)
                (derived-mode-p 'gfm-mode))
      (display-line-numbers-mode 1)
      (setq display-line-numbers-type 'relative)))

  ;; Add hook to enable relative line numbers
  (add-hook 'prog-mode-hook 'enable-relative-line-numbers)
  (add-hook 'text-mode-hook 'enable-relative-line-numbers)
#+end_src

** org mode
#+begin_src emacs-lisp
  (require 'org-tempo)
#+end_src

* TODO evilmode
* TODO magit
* TODO Package Manager / Use Package


* font



#+begin_src emacs-lisp

;; 设置默认字体族和大小。
;; "Maple Mono NF CN" 字体设计旨在实现 CJK 字符与拉丁字符 2:1 的宽度比。
(set-face-attribute 'default nil
                    :font "Maple Mono NF CN"
                    :height 140) ; 根据需要调整高度（单位：1/10pt）

;; 确保 fixed-pitch face 也使用 Maple Mono NF CN 并继承高度。
(set-face-attribute 'fixed-pitch nil
                    :font "Maple Mono NF CN"
                    :height (face-attribute 'default :height))

;; 关键步骤：告知 Emacs 为 'han' (CJK) 字符使用 "Maple Mono NF CN"。
;; 这使得 Emacs 可以利用该字体固有的 CJK 字符 2:1 宽度特性。
;; 第一个参数 t 表示此设置应用于标准字体集。
;; 明确指定高度以匹配 default face，这可能有助于解决缩放相关的对齐问题。
(set-fontset-font t 'han (font-spec :family "Maple Mono NF CN" :height (face-attribute 'default :height)))

;; 可选项：如果希望 variable-pitch 文本（例如某些 Org mode 视图中）
;; 也使用等宽字体，请取消注释以下代码。
;; 否则，variable-pitch 将使用系统的比例宽度字体。
; (set-face-attribute 'variable-pitch nil
;                     :font "Maple Mono NF CN"
;                     :height (face-attribute 'default :height))

;; 配置 Org table 字体，并继承高度。
(set-face-attribute 'org-table nil
                    :font "Maple Mono NF CN"
                    :height (face-attribute 'default :height))

;; 关于 `char-width-alist`:
;; 如果 "Maple Mono NF CN" 被正确用于 'han' 书写系统 (通过 set-fontset-font),
;; 则很可能不再需要此设置，因为字体本身应能处理 2:1 的宽度。
;; 尝试时不使用此行。如果仍有问题，可以尝试添加 (setq char-width-alist '((han . 2)))。
;; 注意：书写系统名称应为 'han'，而非 'chinese'。
;; ;; (setq char-width-alist '((han . 2))) ;; 保持注释，除非测试表明需要

;; 标准 Org mode 表格对齐设置（通常是好的）
(setq org-table-align-indent t)
(setq org-table-align-char ?\s) ;; Corrected syntax

;; 应用此配置后，请重启 Emacs 或重新加载配置。
;; 使用 C-u C-x = 检查 CJK 字符的属性，确认字体和脚本。
;; 仔细检查表格对齐情况。
#+end_src

* Markdown Mode
#+begin_src emacs-lisp
  (use-package markdown-mode
    :ensure t
    :mode (("\\.md\\\'" . gfm-mode)
           ("\\.markdown\\\'" . gfm-mode))
    :init
    (setq markdown-command "multimarkdown")) ;; Or your preferred markdown processor
#+end_src

* Local Variables

# Local Variables:
# eval: (add-hook 'after-save-hook (lambda ()(org-babel-tangle)) nil t)
# End:




sdfsdf

| sdf  | sdf |
| iikj |     |
| sdf  |     |
|      |     |
